syntax = "proto3";

option java_outer_classname = "ClientServerSerializeProtocol_pb";
option java_package = "org.foomaa.jvchat.messages";

message GeneralAuthProto {
    uint32 type = 1;
    oneof body {
        EntryRequestProto entryRequest = 2;
        EntryReplyProto entryReply = 3;
        RegistrationRequestProto registrationRequest = 4;
        RegistrationReplyProto registrationReply = 5;
        ResetPasswordRequestProto resetPasswordRequest = 6;
        ResetPasswordReplyProto resetPasswordReply = 7;
        VerifyEmailRequestProto verifyEmailRequest = 8;
        VerifyEmailReplyProto verifyEmailReply = 9;
    }
}

message EntryRequestProto {
    string login = 1;
    string password = 2;
}

message EntryReplyProto {
    bool reply = 1;
}

message RegistrationRequestProto {
    string login = 1;
    string email = 2;
    string password = 3;
}

message RegistrationReplyProto {
    enum Error {
        Login = 0;
        Email = 1;
        LoginAndEmail = 2;
        NoError = 9999;
    }
    bool reply = 1;
    Error error = 2;
}

message ResetPasswordRequestProto {
    string email = 1;
}

message ResetPasswordReplyProto {
    bool reply = 1;
}

message VerifyEmailRequestProto {
    string code = 1;
}

message VerifyEmailReplyProto {
    bool reply = 1;
}
